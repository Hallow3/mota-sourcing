<div *ngIf="popup$ | async as config" class="fixed inset-0 z-50 flex items-center justify-center p-4">
  <!-- Backdrop -->
  <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" (click)="onClose()"></div>
  
  <!-- Popup -->
  <div class="relative bg-gray-800 rounded-2xl shadow-2xl border max-w-md w-full mx-4 animate-in fade-in zoom-in duration-200"
       [class]="getBorderClass(config.type)">
    
    <!-- Header -->
    <div class="flex items-center p-6 pb-4">
      <div class="flex-shrink-0 mr-4">
        <i [class]="getIconClass(config.type)" class="text-2xl"></i>
      </div>
      <div class="flex-1">
        <h3 class="text-lg font-semibold text-white">{{ config.title }}</h3>
      </div>
      <button (click)="onClose()" class="text-gray-400 hover:text-white transition-colors">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <!-- Content -->
    <div class="px-6 pb-6">
      <p class="text-gray-300 mb-6">{{ config.message }}</p>
      
      <!-- Actions -->
      <div class="flex gap-3">
        <ng-container *ngIf="config.type === 'confirm'">
          <button 
            (click)="onCancel(config)"
            class="flex-1 px-4 py-2 text-gray-300 border border-gray-600 rounded-lg hover:bg-gray-700 transition-colors">
            {{ config.cancelText }}
          </button>
          <button 
            (click)="onConfirm(config)"
            class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
            {{ config.confirmText }}
          </button>
        </ng-container>
        
        <ng-container *ngIf="config.type !== 'confirm'">
          <button 
            (click)="onConfirm(config)"
            class="w-full px-4 py-2 text-white rounded-lg transition-colors"
            [class.bg-green-600]="config.type === 'success'"
            [class.hover:bg-green-700]="config.type === 'success'"
            [class.bg-red-600]="config.type === 'error'"
            [class.hover:bg-red-700]="config.type === 'error'"
            [class.bg-yellow-600]="config.type === 'warning'"
            [class.hover:bg-yellow-700]="config.type === 'warning'">
            {{ config.confirmText }}
          </button>
        </ng-container>
      </div>
    </div>
  </div>
</div>